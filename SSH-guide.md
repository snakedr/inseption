# –†–∞–±–æ—Ç–∞ —Å SSH-–∫–ª—é—á–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-—Å–µ—Ä–≤–µ—Ä–∞

> –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∏ –∑–∞—â–∏—Ç–µ SSH-–∫–ª—é—á–µ–π –Ω–∞ Linux

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–µ–π](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-ssh-–∫–ª—é—á–µ–π)
- [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ ssh-agent](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–∫–ª—é—á–∞-–≤-ssh-agent)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ ~/.ssh/config](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-sshconfig)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-—Å–µ—Ä–≤–µ—Ä–∞ (sshd_config)](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-ssh-—Å–µ—Ä–≤–µ—Ä–∞-sshd_config)
- [–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ /etc/ssh/sshd_config.d/](#—Ñ–∞–π–ª—ã-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-–≤-etcsshsshd_configd)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#–ø–æ–ª–µ–∑–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–µ–π

### 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π SSH-–∫–ª—é—á

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ed25519** (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π):

```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

**–î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ RSA**:

```bash
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

### 2. –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- `~/.ssh/id_ed25519` (–¥–ª—è ed25519)
- `~/.ssh/id_rsa` (–¥–ª—è RSA)

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å–Ω—É—é —Ñ—Ä–∞–∑—É (passphrase)

–≠—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞.

---

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ ssh-agent

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ssh-agent (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω)

```bash
eval "$(ssh-agent -s)"
```

### 2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á

```bash
ssh-add ~/.ssh/id_ed25519
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω

```bash
ssh-add -l
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ~/.ssh/config

–§–∞–π–ª `~/.ssh/config` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ—Ä–≤–µ—Ä–∞–º –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–º–Ω–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
Host myserver
    HostName example.com
    User username
    Port 22
    IdentityFile ~/.ssh/id_ed25519
    IdentitiesOnly yes

Host production
    HostName 192.168.1.100
    User admin
    Port 2222
    IdentityFile ~/.ssh/id_rsa_prod
    IdentitiesOnly yes

Host github
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_github
    IdentitiesOnly yes
    AddKeysToAgent yes
```

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|
| `Host` | –ü—Å–µ–≤–¥–æ–Ω–∏–º –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `ssh myserver`) |
| `HostName` | IP-–∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ |
| `User` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è |
| `Port` | –ü–æ—Ä—Ç SSH-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 22) |
| `IdentityFile` | –ü—É—Ç—å –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É |
| `IdentitiesOnly yes` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–ª—é—á, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ |
| `AddKeysToAgent yes` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–ª—é—á –≤ ssh-agent |

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-—Å–µ—Ä–≤–µ—Ä–∞ (sshd_config)

–§–∞–π–ª `/etc/ssh/sshd_config` —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º SSH-—Å–µ—Ä–≤–µ—Ä–∞.

### –ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä—Ç—ã
Port 22
Port 33333

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –∫–ª—é—á—É
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys

# –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Ö–æ–¥ –ø–æ–¥ root
PermitRootLogin prohibit-password

# –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é
PasswordAuthentication no
ChallengeResponseAuthentication no

# Forwarding (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
X11Forwarding yes
AllowTcpForwarding yes

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∞–Ω—Å–æ–º
ClientAliveInterval 300
ClientAliveCountMax 2

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
SyslogFacility AUTH
LogLevel VERBOSE
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
sudo systemctl restart sshd
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
sudo sshd -t
```

---

## –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ /etc/ssh/sshd_config.d/

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã (Ubuntu 20.04+, Debian 11+) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –≤ `/etc/ssh/sshd_config.d/`.

### –í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å:

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `sshd_config.d/*.conf` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π `sshd_config`**

–ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–π–ª `/etc/ssh/sshd_config.d/50-cloud-init.conf` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

```bash
PasswordAuthentication yes
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```bash
grep -r "PasswordAuthentication" /etc/ssh/
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:**

```bash
chmod 700 ~/.ssh
chmod 600 ~/.ssh/id_ed25519
chmod 644 ~/.ssh/id_ed25519.pub
chmod 600 ~/.ssh/config
```

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
chmod 755 /home/username
```

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `IdentitiesOnly yes` –≤ –∫–æ–Ω—Ñ–∏–≥–µ

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –∫–ª—é—á–µ–π –∏–∑ ssh-agent:

```bash
Host myserver
    HostName example.com
    User username
    IdentityFile ~/.ssh/id_specific
    IdentitiesOnly yes
```

### –û—Ç–∫–ª—é—á–∏—Ç–µ –≤—Ö–æ–¥ –ø–æ–¥ root

```bash
# –í sshd_config:
PermitRootLogin prohibit-password
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ `sudo` –¥–ª—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

### 4Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ Port 22 –Ω–∞ –¥—Ä—É–≥–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:
Port 2222
```

### 5Ô∏è‚É£ –û—Ç–∫–ª—é—á–∏—Ç–µ –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é

```bash
PasswordAuthentication no
```

### 6Ô∏è‚É£ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥-—Ñ–∞–π–ª—ã

```bash
sudo journalctl -u ssh -f
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|
| `ssh-keygen -t ed25519 -C "email@example.com"` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π SSH-–∫–ª—é—á |
| `ssh-add ~/.ssh/id_ed25519` | –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ ssh-agent |
| `ssh-add -l` | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –≤ ssh-agent |
| `ssh-add -D` | –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ ssh-agent |
| `ssh -vvv user@server` | –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–æ—Ç–ª–∞–¥–∫–∞) |
| `sudo sshd -t` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å sshd_config |
| `sudo systemctl restart sshd` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å SSH-—Å–µ—Ä–≤–µ—Ä |
| `sudo journalctl -u ssh -f` | –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ SSH –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| `sudo ss -tulpn \| grep ssh` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞ –∫–∞–∫–∏—Ö –ø–æ—Ä—Ç–∞—Ö —Å–ª—É—à–∞–µ—Ç SSH |
| `ssh-keyscan example.com` | –ü–æ–ª—É—á–∏—Ç—å public key —Å–µ—Ä–≤–µ—Ä–∞ |
| `ssh-copy-id -i ~/.ssh/id_ed25519.pub user@server` | –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä |

---

## üîç –û—Ç–ª–∞–¥–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
ssh -vvv user@server
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥—Å–∫–∞–∂–µ—Ç, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞.

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OpenSSH Official Documentation](https://man.openbsd.org/ssh)
- [SSH Best Practices](https://infosec.mozilla.org/guidelines/openssh)
- [GitHub SSH Setup Guide](https://docs.github.com/en/authentication/connecting-to-github-with-ssh)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** December 2025

